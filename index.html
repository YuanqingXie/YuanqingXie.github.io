<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yuanqing Xie - Official Website</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --primary:#555; --dark:#222; --gray:#777;
      --light-gray:#eee; --white:#fff; --black:#000;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans',sans-serif;}
    html{scroll-behavior:smooth;}
    body{background-color:var(--black);color:var(--white);overflow-x:hidden;line-height:1.6;}

    /* ======= NAVBAR (透明) ======= */
    .navbar{
      position:fixed; top:0; left:0; width:100%;
      display:flex; justify-content:space-between; align-items:center;
      padding:14px 5%; background:transparent; z-index:1000;
    }
    .site-title{font-size:1.1rem;font-weight:700;letter-spacing:.2px;}
    .nav-right{display:flex; align-items:center; gap:22px;}
    .lang-pill{display:inline-flex; align-items:center; gap:6px;
      font-weight:600; opacity:.9;}
    .nav-links{display:flex; gap:18px; align-items:center;}
    .nav-links a{color:var(--white); text-decoration:none; font-weight:500; font-size:.95rem; opacity:.95; transition:opacity .2s}
    .nav-links a:hover{opacity:.7;}
    .mobile-menu-btn{display:none;background:none;border:none;font-size:1.4rem;color:#fff}

    /* ======= 视频区 ======= */
    .hero,.hero2{
      height:100vh; display:flex; align-items:center; position:relative; padding-top:80px; background:#111;
    }
    .hero-video{
      position:absolute; top:0; left:0; width:100%; height:100%;
      object-fit:cover; z-index:0; opacity:1;
    }
    .hero::after,.hero2::after{
      content:''; position:absolute; inset:0; background:rgba(0,0,0,.5); z-index:1;
    }
    .hero-content{
      position:relative; z-index:2; display:flex; width:100%;
      max-width:1200px; margin:0 auto; padding:0 5%;
      color:var(--white);
    }
    .hero-text{flex:2;}
    .hero h1{font-size:3rem; margin-bottom:25px; line-height:1.2; font-weight:600; display:none;}
    .hero h1.active{display:block;}

    .video-controls{
      position:absolute; bottom:20px; right:20px; display:flex; gap:10px; z-index:10;
    }
    .video-btn{
      background:rgba(0,0,0,.5); color:#fff; border:none; width:40px; height:40px;
      border-radius:50%; display:flex; align-items:center; justify-content:center;
      cursor:pointer; transition:all .3s ease;
    }
    .video-btn:hover{background:rgba(0,0,0,.8); transform:scale(1.08);}

    /* 其他区块（可按需添加） */
    .projects-section{padding:100px 5%; background:var(--black);}
    .section-header{text-align:center; margin-bottom:60px;}
    .section-header h2{font-size:2.2rem; margin-bottom:15px; color:var(--white); position:relative; display:none;}
    .section-header h2.active{display:block;}
    .section-header p{display:none;}
    .section-header p.active{display:block;}

    /* 简单响应式 */
    @media (max-width: 768px){
      .nav-links{display:none;}
      .mobile-menu-btn{display:block;}
    }
  </style>
</head>
<body>

  <!-- 透明导航栏 -->
  <nav class="navbar" aria-label="Primary">
    <div class="logo-container">
      <span class="site-title">Yuanqing Xie</span>
    </div>
    <div class="nav-right">
      <span class="lang-pill" aria-label="Language: German"><i class="fa-solid fa-globe"></i> DE</span>
      <div class="nav-links">
        <a href="#home">Startseite</a>
        <a href="#projects">Projekte</a>
        <a href="#about">Über mich</a>
        <a href="#contact">Kontakt</a>
      </div>
      <button class="mobile-menu-btn" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <video muted loop playsinline class="hero-video" id="hero-video">
      <source src="assets/Hero_2048x1080.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="video-controls">
      <button class="video-btn" id="mute-btn" title="Unmute/Mut e">
        <i class="fas fa-volume-mute"></i>
      </button>
    </div>
    <div class="hero-content">
      <div class="hero-text">
        <h1 lang="en" class="active">Innovative Design · Technology Integration · User Experience</h1>
        <h1 lang="de">Innovatives Design · Technologieintegration · Benutzererlebnis</h1>
        <h1 lang="zh">创新设计 · 技术整合 · 用户体验</h1>
      </div>
    </div>
  </section>

  <!-- 第二个视频 Hero2 -->
  <section class="hero2" id="projects">
    <video muted loop playsinline class="hero-video" id="hero-video2">
      <source src="assets/Hero_2_2048x1080.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="video-controls">
      <button class="video-btn" id="mute-btn2" title="Unmute/Mute">
        <i class="fas fa-volume-mute"></i>
      </button>
    </div>
  </section>

  <!-- 可选：占位锚点，避免空链接（按需保留/删除） -->
  <section id="about"></section>
  <section id="contact"></section>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // 绑定视频与按钮
      const pairs = [
        {video: document.getElementById('hero-video'),  btn: document.getElementById('mute-btn')},
        {video: document.getElementById('hero-video2'), btn: document.getElementById('mute-btn2')},
      ];

      // 初始化：全部静音，先不自动播放，让观察器决定
      pairs.forEach(({video, btn}) => {
        if (!video) return;
        video.muted = true;
        updateIcon(video, btn);
        // 静音按钮
        if (btn) {
          btn.addEventListener('click', () => {
            // 只切换当前视频的静音状态
            video.muted = !video.muted;
            updateIcon(video, btn);
          });
        }
      });

      function updateIcon(video, btn){
        if (!btn) return;
        btn.innerHTML = video.muted
          ? '<i class="fas fa-volume-mute"></i>'
          : '<i class="fas fa-volume-up"></i>';
      }

      // 只让进入视口的那个播放；其余暂停并静音
      const io = new IntersectionObserver((entries) => {
        // 找到可见度最高的项作为“激活视频”
        let topEntry = null;
        entries.forEach(e => {
          if (!topEntry || e.intersectionRatio > topEntry.intersectionRatio) topEntry = e;
        });
        if (!topEntry) return;

        const activeVideo = topEntry.target;
        if (topEntry.isIntersecting) setActive(activeVideo);
      }, { threshold: [0, .25, .5, .6, .75, 1] });

      function setActive(activeVideo){
        pairs.forEach(({video, btn}) => {
          if (video === activeVideo){
            // 视区中的视频尝试播放（若浏览器策略阻止，也不会报错）
            video.play().catch(()=>{});
            // 不强制改它的静音状态，尊重用户按钮；但会更新图标
            updateIcon(video, btn);
          } else {
            // 非活动视频：暂停 + 静音
            video.pause();
            video.muted = true;
            updateIcon(video, btn);
          }
        });
      }

      // 观察两个视频
      pairs.forEach(({video}) => video && io.observe(video));

      // 页面载入时，立即判断当前可见的视频
      // （某些浏览器在 DOMContentLoaded 时尚未触发 observer，因此手动触发一次）
      setTimeout(() => {
        const viewportCenter = window.innerHeight / 2;
        let candidate = null, candidateDelta = Infinity;
        pairs.forEach(({video}) => {
          if (!video) return;
          const rect = video.getBoundingClientRect();
          const videoCenter = rect.top + rect.height/2;
          const delta = Math.abs(videoCenter - viewportCenter);
          if (delta < candidateDelta){ candidate = video; candidateDelta = delta; }
        });
        if (candidate) setActive(candidate);
      }, 0);
    });
  </script>
</body>
</html>
