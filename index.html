<!DOCTYPE html>
<html lang="de" data-lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yuanqing Xie - Official Website</title>

  <!-- EN/DE: Outfit; ZH: Noto Sans SC (China mirror) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.loli.net">
  <link rel="preconnect" href="https://gstatic.loli.net" crossorigin>
  <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    :root{ --white:#fff; --black:#000; --nav-h:72px; }
    *{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      background:#000;color:#fff;line-height:1.6;overflow-x:hidden;
      font-family:'Outfit',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
    }
    html[data-lang="zh"] body{
      font-family:'Noto Sans SC','PingFang SC','Microsoft YaHei',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
    }

    /* NAV */
    .navbar{
      position:fixed;inset:0 0 auto 0;height:var(--nav-h);
      display:flex;align-items:center;justify-content:space-between;
      padding:0 3%; background:transparent; z-index:1000; white-space:nowrap; overflow:visible;
    }
    .logo-wrap{display:flex;align-items:center;gap:10px;min-width:0;white-space:nowrap}
    .logo{height:26px;width:auto;flex:0 0 auto}
    .site-title{font-weight:700;line-height:1;white-space:nowrap;font-size:clamp(1rem,2.2vw,1.35rem)}
    html[data-lang="en"] .navbar, html[data-lang="de"] .navbar{font-weight:400}

    .nav-right{display:flex;align-items:center;gap:16px;min-width:0}
    .nav-links{display:flex;align-items:center;gap:20px;min-width:0}
    .nav-links a{color:#fff;text-decoration:none;font-size:clamp(1rem,1.6vw,1.15rem);white-space:nowrap}
    .mobile-btn{display:none;background:none;border:0;color:#fff;font-size:1.6rem;cursor:pointer}

    /* Language button (text only) */
    .lang{position:relative;z-index:1002}
    .lang-btn{
      background:none;border:none;color:#fff;cursor:pointer;
      padding:6px 8px;border-radius:6px;white-space:nowrap;
      font-size:clamp(1rem,1.6vw,1.15rem);
    }
    .lang-btn:focus{outline:none}
    .lang-menu{
      position:absolute;top:calc(100% + 8px);right:0;display:none;flex-direction:column;
      background:#000;border:1px solid rgba(255,255,255,.18);border-radius:10px;min-width:140px;
      box-shadow:0 8px 28px rgba(0,0,0,.5);z-index:1003;overflow:hidden
    }
    .lang.open .lang-menu{display:flex}
    .lang-item{padding:10px 12px;cursor:pointer}
    .lang-item:hover{background:rgba(255,255,255,.08)}
    .lang-item.active{background:rgba(255,255,255,.18);font-weight:600}

    @media (max-width: 860px){
      .nav-links{display:none}
      .mobile-btn{display:inline-block}
    }
    .mobile-menu{
      position:fixed;top:var(--nav-h);left:0;width:100%;display:none;flex-direction:column;gap:12px;
      background:#000;border-top:1px solid rgba(255,255,255,.12);z-index:999;padding:18px 3%
    }
    .mobile-menu.show{display:flex}
    .mobile-menu a{color:#fff;text-decoration:none;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.08)}

    /* HERO videos (loop) */
    .hero,.hero2{height:100vh;position:relative;display:flex;align-items:center;justify-content:center;padding-top:var(--nav-h);background:#111}
    .hero video,.hero2 video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:0}
    .controls{position:absolute;right:16px;bottom:16px;z-index:5;display:flex;gap:8px}
    .btn{width:40px;height:40px;border-radius:50%;border:0;background:rgba(0,0,0,.55);color:#fff;cursor:pointer}
    .btn:hover{background:rgba(0,0,0,.8)}

    /* Keywords */
    .hero-content{position:relative;z-index:2;width:100%;padding:0 3%}
    .kw{display:flex;flex-direction:column;gap:6px;transform:translateY(16px);opacity:0;animation:kwIn .8s ease-out .2s forwards}
    .kw div{font-size:clamp(1.4rem,4.2vw,2.4rem);line-height:1.15;font-weight:600}
    @keyframes kwIn{to{transform:translateY(0);opacity:1}}

    /* PROJECTS */
    #projects{padding:80px 2% 110px;background:#000}
    .projects{width:100%;display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
    .proj{display:contents}
    @media (max-width: 980px){ .projects{grid-template-columns:1fr} }
    .card{background:#0b0b0b;border:1px solid rgba(255,255,255,.08);border-radius:14px;overflow:hidden;position:relative}
    .mv-wrap{position:relative;min-height:480px}
    .mv-wrap model-viewer{width:100%;height:100%;min-height:480px;background:#111}
    /* Hotspot (follows part coordinates) */
    .hotspot-btn{
      width:42px;height:42px;border-radius:50%;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(0,0,0,.55);color:#fff;display:flex;align-items:center;justify-content:center;
      cursor:pointer
    }
    .hotspot-btn:hover{background:rgba(0,0,0,.8)}
    .info{background:#0b0b0b;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:18px}
    .info h3{font-size:1.25rem;margin-bottom:10px;white-space:nowrap}
    .tags{display:flex;flex-wrap:wrap;gap:8px}
    .tag{font-size:.9rem;padding:6px 10px;border:1px solid rgba(255,255,255,.18);border-radius:999px}

    /* ABOUT portrait: enlarge a bit */
    #about{position:relative;padding:100px 3%;background:#000}
    #about::before{
      content:"";position:absolute;inset:0;
      background:url('assets/portrait.png') center / contain no-repeat;
      transform:scale(1.18); /* 放大一些 */
      transform-origin:center;
      opacity:1; /* 100% 可见 */
      pointer-events:none;
    }
    #about .sec{position:relative;max-width:900px;margin:0 auto}
    #about .sec h2{font-size:1.8rem;margin-bottom:12px}
    #about .sec p{font-size:1rem;opacity:.95}

    #contact{padding:80px 3%}
    #contact .sec{max-width:900px;margin:0 auto}
    #contact .sec h2{font-size:1.8rem;margin-bottom:12px}
    #contact .sec p{font-size:1rem;opacity:.95}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="navbar">
    <div class="logo-wrap">
      <img class="logo" src="assets/logo.svg" alt="logo">
      <div class="site-title" id="siteName">Yuanqing Xie</div>
    </div>
    <div class="nav-right">
      <div class="nav-links">
        <a href="#home" data-i18n="nav_home">Startseite</a>
        <a href="#projects" data-i18n="nav_projects">Projekte</a>
        <a href="#about" data-i18n="nav_about">Über mich</a>
        <a href="#contact" data-i18n="nav_contact">Kontakt</a>
      </div>
      <div class="lang" id="lang">
        <button class="lang-btn" id="langBtn"><span id="langLabel">DE</span></button>
        <div class="lang-menu" id="langMenu">
          <div class="lang-item" data-lang="de">Deutsch</div>
          <div class="lang-item" data-lang="en">English</div>
          <div class="lang-item" data-lang="zh">简体中文</div>
        </div>
      </div>
      <button class="mobile-btn" id="hamburger" aria-label="Menu"><i class="fa-solid fa-bars"></i></button>
    </div>
  </nav>

  <div class="mobile-menu" id="mobileMenu">
    <a href="#home" data-i18n="nav_home">Startseite</a>
    <a href="#projects" data-i18n="nav_projects">Projekte</a>
    <a href="#about" data-i18n="nav_about">Über mich</a>
    <a href="#contact" data-i18n="nav_contact">Kontakt</a>
  </div>

  <!-- HERO 1 (loop) -->
  <section class="hero" id="home">
    <video muted loop playsinline id="v1">
      <source src="assets/Hero_2048x1080.mp4" type="video/mp4">
    </video>
    <div class="controls"><button class="btn" id="m1"><i class="fas fa-volume-mute"></i></button></div>
    <div class="hero-content">
      <div class="kw">
        <div data-i18n="kw1_1">Innovatives Design</div>
        <div data-i18n="kw1_2">Technologieintegration</div>
        <div data-i18n="kw1_3">Benutzererlebnis</div>
      </div>
    </div>
  </section>

  <!-- HERO 2 (loop) -->
  <section class="hero2" id="hero2">
    <video muted loop playsinline id="v2">
      <source src="assets/Hero_2_2048x1080.mp4" type="video/mp4">
    </video>
    <div class="controls"><button class="btn" id="m2"><i class="fas fa-volume-mute"></i></button></div>
    <div class="hero-content">
      <div class="kw">
        <div data-i18n="kw2_1">Skizzen · ABS-Modelle</div>
        <div data-i18n="kw2_2">CNC-Metall · Glasherstellung</div>
        <div data-i18n="kw2_3">Programmierung · KI-Training · Montage</div>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects">
    <div class="projects">
      <!-- SGB -->
      <div class="proj">
        <div class="card">
          <div class="mv-wrap">
            <model-viewer
              id="mv-sgb"
              src="assets/sgb.glb"
              camera-controls
              auto-rotate
              rotation-per-second="10deg"
              ar="false">
              <!-- hotspot 跟随“相机”节点 -->
              <button slot="hotspot-sgb-cam"
                      class="hotspot-btn"
                      id="hot-sgb"
                      data-node="相机"
                      data-visibility-attribute="visible"
                      title="xiangji">
                <i class="fa-solid fa-camera"></i>
              </button>
            </model-viewer>
          </div>
        </div>
        <div class="info">
          <h3 id="p1_title">智能手势识别盒子</h3>
          <div class="tags" id="p1_tags">
            <span class="tag">手势跟踪</span>
            <span class="tag">机器学习</span>
            <span class="tag">人机交互</span>
          </div>
        </div>
      </div>

      <!-- Tractor -->
      <div class="proj">
        <div class="card">
          <div class="mv-wrap">
            <model-viewer
              id="mv-tractor"
              src="assets/tractor.glb"
              camera-controls
              auto-rotate
              rotation-per-second="10deg"
              ar="false">
              <!-- hotspot 跟随“achse”节点 -->
              <button slot="hotspot-tractor-achse"
                      class="hotspot-btn"
                      id="hot-tractor"
                      data-node="achse"
                      data-visibility-attribute="visible"
                      title="achse / glas / handle">
                <i class="fa-solid fa-tractor"></i>
              </button>
            </model-viewer>
          </div>
        </div>
        <div class="info">
          <h3 id="p2_title">概念拖拉机</h3>
          <div class="tags" id="p2_tags">
            <span class="tag">能源效率</span>
            <span class="tag">多功能作业</span>
            <span class="tag">自动驾驶</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about">
    <div class="sec">
      <h2 data-i18n="about_t">Über mich</h2>
      <p id="about_txt">
        Industrie-Designer mit Fokus auf intelligente Produkte und Industrieausrüstung.
        Von Idee bis Prototyp (Skizze, ABS, CNC, Glas) sowie Programmierung & KI-Interaktionen.
        Nutzererlebnis & Herstellbarkeit im Fokus.
      </p>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact">
    <div class="sec">
      <h2 data-i18n="contact_t">Kontakt</h2>
      <p id="contact_txt">E-Mail: <a href="mailto:hello@yuanqingxie.com">hello@yuanqingxie.com</a></p>
    </div>
  </section>

  <!-- model-viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer@latest/dist/model-viewer.min.js"></script>
  <script>
    /* ===== i18n (保持上一版逻辑，不改动未要求部分) ===== */
    const I18N = {
      de:{lang:'DE',name:'Yuanqing Xie',
        nav_home:'Startseite',nav_projects:'Projekte',nav_about:'Über mich',nav_contact:'Kontakt',
        kw1_1:'Innovatives Design',kw1_2:'Technologieintegration',kw1_3:'Benutzererlebnis',
        kw2_1:'Skizzen · ABS-Modelle',kw2_2:'CNC-Metall · Glasherstellung',kw2_3:'Programmierung · KI-Training · Montage',
        p1_title:'Intelligente Gestenerkennungsbox',p1_tags:['Gestentracking','Maschinelles Lernen','Mensch-Computer-Interaktion'],
        p2_title:'Konzept-Traktor',p2_tags:['Energieeffizienz','Mehrzweckarbeit','Autonomes Fahren'],
        about_t:'Über mich',
        about_txt:'Industriedesigner mit Fokus auf intelligente Produkte und Industrieausrüstung. Von Idee bis Prototyp (Skizze, ABS, CNC, Glas) sowie Programmierung & KI-Interaktionen. Nutzererlebnis & Herstellbarkeit im Fokus.',
        contact_t:'Kontakt',contact_txt:'E-Mail: <a href="mailto:hello@yuanqingxie.com">hello@yuanqingxie.com</a>'},
      en:{lang:'EN',name:'Yuanqing Xie',
        nav_home:'Home',nav_projects:'Projects',nav_about:'About',nav_contact:'Contact',
        kw1_1:'Innovative Design',kw1_2:'Technology Integration',kw1_3:'User Experience',
        kw2_1:'Sketches · ABS Models',kw2_2:'CNC Metal · Glassmaking',kw2_3:'Programming · AI Training · Assembly',
        p1_title:'Smart Gesture Recognition Box',p1_tags:['Gesture Tracking','Machine Learning','HCI'],
        p2_title:'Concept Tractor',p2_tags:['Energy Efficiency','Multi-purpose Work','Autonomous Driving'],
        about_t:'About',
        about_txt:'Industrial designer focusing on intelligent products and industrial equipment. From concept to prototype (sketch, ABS, CNC, glass) plus coding & AI interactions. Strong UX and manufacturability.',
        contact_t:'Contact',contact_txt:'Email: <a href="mailto:hello@yuanqingxie.com">hello@yuanqingxie.com</a>'},
      zh:{lang:'中文',name:'谢原卿',
        nav_home:'首页',nav_projects:'项目',nav_about:'关于我',nav_contact:'联系',
        kw1_1:'创新设计',kw1_2:'技术整合',kw1_3:'用户体验',
        kw2_1:'草图 · ABS模型',kw2_2:'CNC金属 · 玻璃制作',kw2_3:'编程 · AI训练 · 组装',
        p1_title:'智能手势识别盒子',p1_tags:['手势追踪','机器学习','人机交互'],
        p2_title:'概念拖拉机',p2_tags:['能效','多用途作业','自动驾驶'],
        about_t:'关于我',
        about_txt:'工业设计师，专注智能产品与工业设备。从概念到原型（草图、ABS、CNC、玻璃）以及编程与AI交互，兼顾用户体验与可制造性。',
        contact_t:'联系',contact_txt:'邮箱：<a href="mailto:hello@yuanqingxie.com">hello@yuanqingxie.com</a>'}
    };

    function applyLang(lang){
      const t = I18N[lang] || I18N.de;
      document.getElementById('siteName').textContent = t.name;
      document.getElementById('langLabel').textContent = t.lang;
      document.querySelectorAll('[data-i18n="nav_home"]').forEach(el=>el.textContent=t.nav_home);
      document.querySelectorAll('[data-i18n="nav_projects"]').forEach(el=>el.textContent=t.nav_projects);
      document.querySelectorAll('[data-i18n="nav_about"]').forEach(el=>el.textContent=t.nav_about);
      document.querySelectorAll('[data-i18n="nav_contact"]').forEach(el=>el.textContent=t.nav_contact);
      ['kw1_1','kw1_2','kw1_3','kw2_1','kw2_2','kw2_3'].forEach(k=>{
        const el = document.querySelector(`[data-i18n="${k}"]`); if(el) el.textContent = t[k];
      });
      document.getElementById('p1_title').textContent = t.p1_title;
      const p1 = document.getElementById('p1_tags'); p1.innerHTML=''; t.p1_tags.forEach(s=>{const span=document.createElement('span');span.className='tag';span.textContent=s;p1.appendChild(span);});
      document.getElementById('p2_title').textContent = t.p2_title;
      const p2 = document.getElementById('p2_tags'); p2.innerHTML=''; t.p2_tags.forEach(s=>{const span=document.createElement('span');span.className='tag';span.textContent=s;p2.appendChild(span);});

      document.querySelector('[data-i18n="about_t"]').textContent = t.about_t;
      document.getElementById('about_txt').innerHTML = t.about_txt;
      document.querySelector('[data-i18n="contact_t"]').textContent = t.contact_t;
      document.getElementById('contact_txt').innerHTML = t.contact_txt;

      document.documentElement.setAttribute('data-lang', lang);
      document.documentElement.lang = (lang==='zh'?'zh':lang);
      localStorage.setItem('lang', lang);
    }

    // Language dropdown
    const langBox = document.getElementById('lang');
    const langBtn = document.getElementById('langBtn');
    const langMenu = document.getElementById('langMenu');
    langBtn.addEventListener('click', e=>{ e.stopPropagation(); langBox.classList.toggle('open'); });
    langMenu.addEventListener('click', e=>{
      const item = e.target.closest('.lang-item'); if(!item) return;
      langBox.classList.remove('open'); applyLang(item.dataset.lang);
    });
    document.addEventListener('click', ()=>langBox.classList.remove('open'));

    // Mobile menu
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    hamburger.addEventListener('click', ()=> mobileMenu.classList.toggle('show'));
    mobileMenu.querySelectorAll('a').forEach(a=>a.addEventListener('click', ()=> mobileMenu.classList.remove('show')));

    // Videos (loop; play only in view)
    function wireVideo(sectionId, videoId, btnId){
      const sec = document.getElementById(sectionId);
      const v = document.getElementById(videoId);
      const b = document.getElementById(btnId);
      v.muted = true;
      const upd = ()=> b.innerHTML = v.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
      b.addEventListener('click', ()=>{ v.muted=!v.muted; upd(); }); upd();
      return {sec, v};
    }
    const V1 = wireVideo('home','v1','m1');
    const V2 = wireVideo('hero2','v2','m2');
    const io = new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        const vid = e.target.querySelector('video');
        if(!vid) return;
        if(e.isIntersecting) vid.play().catch(()=>{});
        else { vid.pause(); vid.muted = true; }
      });
    },{threshold:.4});
    [V1.sec, V2.sec].forEach(s=>io.observe(s));

    // ===== Model animations: default NOT running; toggle forward once / reverse once; keep state =====
    // Helper: play one clip with direction; hold end/start when finished
    function playClipOnceHold(mv, clipName, direction){
      mv.animationName = clipName;
      try{ mv.timeScale = direction >= 0 ? 1 : -1; }catch(e){}
      if(direction >= 0){
        // 正放从 0 开始
        mv.currentTime = 0;
      } else {
        // 倒放：从当前状态开始（不强制跳到尾帧）
        // 如果当前恰在起点，为保证可见效果，可向尾帧轻推；但按你的要求这里不做跳转
      }
      try{ mv.play({repetitions:1}); }catch(e){ mv.play(); }

      const finish = ()=>{
        mv.removeEventListener('animation-finish', finish);
        // 保持状态：正放停在尾帧；倒放停在首帧
        try{
          const d = mv.model?.animationClips?.find(c=>c.name===clipName)?.duration;
          if(typeof d === 'number'){
            mv.pause();
            mv.currentTime = direction >= 0 ? d : 0;
          } else {
            mv.pause();
          }
        }catch(e){ mv.pause(); }
      };
      mv.addEventListener('animation-finish', finish);
    }

    // SGB: hotspot follows node "相机"
    (function(){
      const mv = document.getElementById('mv-sgb');
      const hot = document.getElementById('hot-sgb');
      const CLIP = 'xiangji动作';
      let forward = true;
      hot.addEventListener('click', ()=>{
        playClipOnceHold(mv, CLIP, forward ? 1 : -1);
        forward = !forward;
      });
    })();

    // Tractor: hotspot follows node "achse"; play 3 clips simultaneously; then reverse simultaneously
    (function(){
      const mv = document.getElementById('mv-tractor');
      const hot = document.getElementById('hot-tractor');
      const CLIPS = ['achse动作','glas动作','handle动作'];
      let forward = true;

      function playSet(direction){
        if(typeof mv.clearAppendedAnimations === 'function'){ try{ mv.clearAppendedAnimations(); }catch(e){} }
        // 尝试并行追加（若版本支持）
        let appended = false;
        if(typeof mv.appendAnimation === 'function'){
          appended = true;
          CLIPS.forEach(name=>{
            try{ mv.appendAnimation(name, {repetitions:1, timeScale: direction>=0?1:-1}); }catch(e){ appended=false; }
          });
        }
        // 设置主动画（用于监听结束与保持状态）
        const primary = CLIPS[0];
        mv.animationName = primary;
        try{ mv.timeScale = direction>=0 ? 1 : -1; }catch(e){}
        if(direction>=0){
          mv.currentTime = 0;
        } // 倒放从当前状态开始

        try{ mv.play({repetitions:1}); }catch(e){ mv.play(); }

        const finish = ()=>{
          mv.removeEventListener('animation-finish', finish);
          // 保持集合终态/始态
          try{
            const d = mv.model?.animationClips?.find(c=>c.name===primary)?.duration;
            if(typeof d === 'number'){
              mv.pause();
              mv.currentTime = direction>=0 ? d : 0;
            } else {
              mv.pause();
            }
          }catch(e){ mv.pause(); }
          if(typeof mv.clearAppendedAnimations === 'function'){ try{ mv.clearAppendedAnimations(); }catch(e){} }
        };
        mv.addEventListener('animation-finish', finish);
      }

      hot.addEventListener('click', ()=>{
        playSet(forward ? 1 : -1);
        forward = !forward;
      });
    })();

    // Init language
    applyLang(localStorage.getItem('lang') || 'de');
  </script>
</body>
</html>
